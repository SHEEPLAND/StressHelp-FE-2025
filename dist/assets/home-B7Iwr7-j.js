function p(){const e=localStorage.getItem("token"),t=document.getElementById("login-link"),n=document.getElementById("login-link-mobile"),c=e?"Kirjaudu ulos":"Kirjaudu sisään",s=e?"#":"login.html";[t,n].forEach(o=>{o&&(o.textContent=c,o.href=s,e&&o.addEventListener("click",y))})}function y(){localStorage.removeItem("token"),window.location.href="index.html"}document.addEventListener("DOMContentLoaded",p);const g=document.getElementById("menu-button"),r=document.getElementById("navigation-links"),f=g.querySelector("i");g.addEventListener("click",()=>{r.classList.toggle("open");const e=r.classList.contains("open");f.setAttribute("class",e?"ri-close-line":"ri-menu-line")});r.addEventListener("click",e=>{e.target.tagName==="A"&&(r.classList.remove("open"),f.setAttribute("class","ri-menu-line"))});window.location.pathname.split("/").pop();window.addEventListener("DOMContentLoaded",()=>{const e=window.location.pathname.split("/").pop()||"index.html";document.querySelectorAll(".navigation-link a").forEach(t=>{t.getAttribute("href")===e&&setTimeout(()=>{t.classList.add("active")},10)})});const i={distance:"50px",origin:"bottom",duration:1e3};typeof ScrollReveal<"u"?(ScrollReveal().reveal(".header-container h1",{...i}),ScrollReveal().reveal(".header-container .button",{...i,delay:500}),ScrollReveal().reveal(".about-item",{...i,interval:500}),ScrollReveal().reveal(".statistics-image img",{...i,origin:"right",interval:500}),ScrollReveal().reveal(".statistics-card",{interval:450,duration:600,delay:400}),ScrollReveal().reveal(".Info-card",{...i,interval:500}),ScrollReveal().reveal(".cta-buttons",{...i,delay:300}),ScrollReveal().reveal(".cta-btn",{...i,interval:200})):console.warn("ScrollReveal not found");const h=document.querySelector(".profile-button"),d=document.querySelector(".profile-dropdown-box");h.addEventListener("click",function(e){e.stopPropagation(),d.style.display=d.style.display==="block"?"none":"block"});document.addEventListener("click",function(e){!h.contains(e.target)&&!d.contains(e.target)&&(d.style.display="none")});window.addEventListener("load",()=>{document.querySelectorAll(".accordion").forEach(e=>{const t=e.nextElementSibling,n=e.querySelector(".accordion-icon"),c=()=>{requestAnimationFrame(()=>{t.style.maxHeight=t.scrollHeight+"px",setTimeout(()=>{t.style.maxHeight=t.scrollHeight+"px"},300)})},s=(o,a)=>{const l=o.querySelectorAll("img");if(l.length===0)return a();let v=0;const u=()=>{v++,v===l.length&&a()};l.forEach(m=>{m.complete?u():(m.addEventListener("load",u),m.addEventListener("error",u))})};e.classList.contains("active")?s(t,()=>{c(),n&&(n.textContent="−")}):n&&(n.textContent="+"),e.addEventListener("click",function(){this.classList.toggle("active"),this.classList.contains("active")?(s(t,()=>{var a,l;c(),typeof ScrollReveal<"u"&&((l=(a=ScrollReveal()).sync)==null||l.call(a))}),n&&(n.textContent="−")):(t.style.maxHeight=null,n&&(n.textContent="+"))})})});window.addEventListener("resize",()=>{document.querySelectorAll(".accordion.active").forEach(e=>{const t=e.nextElementSibling;requestAnimationFrame(()=>{t.style.maxHeight=t.scrollHeight+"px"}),setTimeout(()=>{t.style.maxHeight=t.scrollHeight+"px"},300)})});
