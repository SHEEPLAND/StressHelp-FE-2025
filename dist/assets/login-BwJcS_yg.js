import"./modulepreload-polyfill-B5Qt9EMX.js";import{f as c}from"./fetch-CfNAfVVD.js";document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector(".login-form"),r=async i=>{i.preventDefault();const a=document.querySelector("#login-username").value.trim(),s=document.querySelector("#login-pass").value.trim(),l={username:a,password:s},u="https://stress-help.northeurope.cloudapp.azure.com/api/auth/login",n={method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(l)};try{console.log("Lähetetään kirjautumispyyntö:",n);const e=await c(u,n);if(e.error){console.error("Kirjautumisvirhe:",e.error),alert("Virheelliset tunnistetiedot.");return}e.message&&(console.log("Kirjautuminen onnistui:",e.message),localStorage.setItem("token",e.token),localStorage.setItem("nimi",e.user.username),alert("Kirjautuminen onnistui! Uudelleenohjataan..."),window.location.href="data.html"),t.reset()}catch(e){console.error("Odottamaton virhe:",e),alert("Jokin meni pieleen. Yritä uudelleen.")}};t&&t.addEventListener("submit",r);const o=document.getElementById("logout-button");o&&o.addEventListener("click",()=>{console.log("Kirjaudutaan ulos..."),localStorage.removeItem("token"),localStorage.removeItem("user_id"),window.location.href="login.html"})});
