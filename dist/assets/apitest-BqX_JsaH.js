import"./style-CE2F9O3O.js";const c=async(t,e={})=>{try{const o=await fetch(t,e);return o.ok?await o.json():{error:(await o.json()).message||"An error occurred"}}catch(o){return console.error("fetchData() error:",o.message),{error:o.message}}},p=async()=>{const e=await c("http://localhost:3000/api/items");if(e.error){console.log("Tapahtui virhe fetch haussa!!");return}console.log(e)},d=document.querySelector(".info_dialog"),g=document.querySelector(".info_dialog button");g.addEventListener("click",()=>{d.close()});const l=document.getElementById("snackbar"),u=(t,e="")=>{l.innerText=t,l.className=`show ${e}`.trim(),setTimeout(()=>{l.className=l.className.replace("show","").trim()},3e3)},m=async()=>{const e=await c("http://localhost:3000/api/users");if(e.error){console.log("Tapahtui virhe fetch haussa!!");return}console.log(e);const o=document.querySelector(".tbody");o.innerHTML="",e.forEach(r=>{const s=document.createElement("tr");s.innerHTML=`
        <td>${r.username}</td>
        <td>${r.email}</td>
        <td><button class="check" data-id="${r.user_id}">Info</button></td>
        <td><button class="del" data-id="${r.user_id}">Delete</button></td>
        <td>${r.user_id}</td>
      `,o.appendChild(s)}),h()},h=()=>{const t=document.querySelectorAll(".check");console.log(t),t.forEach(e=>{e.addEventListener("click",async o=>{console.log("Klikkasit nappulaa:",o.target);const r=o.target.dataset.id;console.log("Haetaan tietoja k√§ytt√§j√§lle id:ll√§:",r);const s=await y(r);console.log(s),s&&(d.querySelector("p").innerHTML="",d.showModal(),d.querySelector("p").innerHTML=`
          <div>User ID: <span>${s.user_id}</span></div>
          <div>User Name: <span>${s.username}</span></div>
          <div>Email: <span>${s.email}</span></div>
          <div>Role: <span>${s.user_level}</span></div>`)})})},y=async t=>{const e=await c(`http://localhost:3000/api/users/${t}`);return e.error?(console.error(`Error fetching item with ID ${t}:`,e.error),alert(`Error: ${e.error}`),null):e},v=async t=>{t.preventDefault();const e=document.querySelector("#username").value.trim(),o=document.querySelector("#password").value.trim(),r=document.querySelector("#email").value.trim(),s="http://localhost:3000/api/users",a={body:JSON.stringify({username:e,password:o,email:r}),method:"POST",headers:{"Content-type":"application/json"}};console.log(a);const n=await c(s,a);if(n.error){console.log(n.error),u("Virhe l√§hett√§misess√§, t√§yt√§ kaikki vaadittavat kent√§t!","error");return}n.message&&(console.log(n.message),u("Onnistunut k√§ytt√§j√§n lis√§√§minen :) üíï","success")),console.log(n),document.querySelector(".addform").reset(),m()},k=async()=>{try{const t=await fetch("https://api.chucknorris.io/jokes/random");console.log(t);const e=await t.json();console.log(e),console.log(e.value)}catch(t){console.error("Virhe:",t)}},f=async()=>{console.log("Moikka, maailma"),console.log("Haetaan paikallisesta tiedostosta");const t=document.getElementById("diary");console.log(t);const o=await c("/diary.json");if(o.error){console.log("Tapahtui virhe fetch haussa!!");return}console.log(o),t.innerHTML="",o.forEach(r=>{const s=document.createElement("div");s.classList.add("card");const i=document.createElement("div");i.classList.add("card-img");const a=document.createElement("img");a.src="/img/diary.jpg",a.alt="Diary Image",i.appendChild(a);const n=document.createElement("div");n.classList.add("card-diary"),n.innerHTML=`
      <p><strong>Date:</strong> ${r.entry_date}</p>
      <p><strong>Mood:</strong> ${r.mood}</p>
      <p><strong>Weight:</strong> ${r.weight} kg</p>
      <p><strong>Sleep:</strong> ${r.sleep_hours} hours</p>
      <p><strong>Notes:</strong> ${r.notes}</p>
    `,s.appendChild(i),s.appendChild(n),t.appendChild(s)})};document.querySelector("#app").innerHTML="Moi t√§ss√§ oman APIn harjoituksia";k();const E=document.querySelector(".get_items");E.addEventListener("click",p);const w=document.querySelector(".get_users");w.addEventListener("click",m);const S=document.querySelector(".formpost");S.addEventListener("click",v);const $=document.querySelector(".get_entries");$.addEventListener("click",f);
